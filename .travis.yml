dist: bionic

language: minimal

env:
  global:
    - REPO=docksal/nginx

  matrix:
    - VERSION=1.15 FROM=nginx:1.15.7-alpine TAGS=1.15,latest
    - VERSION=1.14 FROM=nginx:1.14.2-alpine TAGS=1.14
    - VERSION=1.13 FROM=nginx:1.13.12-alpine TAGS=1.13
    - VERSION=1.12 FROM=nginx:1.12.2-alpine TAGS=1.12
    - VERSION=1.11 FROM=nginx:1.11.10-alpine TAGS=1.11

install:
  # Install Docksal to have a matching versions of Docker on the build host
  - curl -fsSL https://get.docksal.io | bash
  - fin version
  - fin sysinfo

script:
  - make
  - make test

after_success:
  - ${TRAVIS_BUILD_DIR}/release.sh

after_failure:
  - make logs
